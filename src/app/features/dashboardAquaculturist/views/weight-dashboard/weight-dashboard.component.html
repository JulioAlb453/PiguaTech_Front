<main class="weight-page">
  <header class="weight-page__header">
    <h1>Seguimiento del Crecimiento</h1>
  </header>

  <div class="weight-page__main-content">
    
    <section class="weight-page__control-panel">
      
      <div class="weight-page__buttons">
        <button 
          class="weight-page__button"
          (click)="toggleMeasurement()"
          [class.weight-page__button--stop]="isMeasuring"
        >
          <svg *ngIf="!isMeasuring" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          
          <!-- Ícono de cuadrado de stop (cuando está midiendo) -->
          <svg *ngIf="isMeasuring" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>
          
          <span>{{ isMeasuring ? 'Detener Medición' : 'Empezar Medición' }}</span>
        </button>
      </div>

      <!-- Contenedor de la ilustración animada -->
      <div class="weight-page__illustration" [ngClass]="{ 'is-measuring': isMeasuring }">
        
        <svg class="weight-page__scale" viewBox="0 0 100 80">
          <path class="weight-page__scale-plate" d="M5,25 H95 C90,35 10,35 5,25 Z" fill="#ccc" stroke="#888" stroke-width="1"/>
          <path d="M20,75 L30,35 H70 L80,75 Z" fill="#ddd" stroke="#999" stroke-width="1"/>
          <rect x="15" y="75" width="70" height="5" rx="2" fill="#ccc" stroke="#888" stroke-width="1"/>
          <circle cx="50" cy="55" r="18" fill="white" stroke="#555" stroke-width="1.5"/>
          <path class="weight-page__scale-needle" d="M50,55 L65,50" stroke="black" stroke-width="2" stroke-linecap="round"/>
        </svg>

         <div class="weight-page__illustration" [ngClass]="{ 'is-measuring': isMeasuring }">
        
        <svg class="weight-page__scale" viewBox="0 0 100 80">
          <path class="weight-page__scale-plate" d="M5,25 H95 C90,35 10,35 5,25 Z" fill="#ccc" stroke="#888" stroke-width="1"/>
          <path class="weight-page__scale-needle" d="M50,55 L65,50" stroke="black" stroke-width="2" stroke-linecap="round"/>
        </svg>

        

      </div>

      </div>

      <p class="weight-page__status-text">
        {{ isMeasuring ? 'Midiendo peso...' : 'Sensor en espera' }}
      </p>

    </section>

    <section class="weight-page__chart-panel">
      <apx-chart
        #chart
        [series]="chartOptions.series!"
        [chart]="chartOptions.chart!"
        [xaxis]="chartOptions.xaxis!"
        [yaxis]="chartOptions.yaxis!"
        [plotOptions]="chartOptions.plotOptions!"
        [dataLabels]="chartOptions.dataLabels!"
        [title]="chartOptions.title!"
        [theme]="chartOptions.theme!"
      ></apx-chart>
    </section>

  </div>

  <footer class="weight-page__metrics">
    <div 
      *ngFor="let metric of keyMetrics" 
      class="weight-page__metric-card"
    >
      <label> {{ metric.label }}</label>
      <span> {{ metric.value }}</span>
    </div>
  </footer>

</main>